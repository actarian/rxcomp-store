/**
 * @license rxcomp-store v1.0.0-beta.10
 * (c) 2020 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
this.rxcomp=this.rxcomp||{},this.rxcomp.form=function(t,e,r,o,n){"use strict";var s=function(){function t(){}return t.clear=function(){this.isLocalStorageSupported()&&localStorage.clear()},t.delete=function(t){this.isLocalStorageSupported()&&localStorage.removeItem(t)},t.exist=function(t){return!!this.isLocalStorageSupported()&&void 0!==localStorage.getItem(t)},t.get=function(t){var e=null;if(this.isLocalStorageSupported())try{var r=localStorage.getItem(t);null!=r&&(e=JSON.parse(r))}catch(e){console.log("LocalStorageService.get.error parsing",t,e)}return e},t.set=function(t,e){if(this.isLocalStorageSupported())try{var r=new Map,o=JSON.stringify(e,(function(t,e){if("object"==typeof e&&null!==e){if(r.has(e))return;r.set(e,!0)}return e}));localStorage.setItem(t,o)}catch(r){console.log("LocalStorageService.set.error serializing",t,e,r)}},t.isLocalStorageSupported=function(){if(this.supported)return!0;var t=!1;try{(t="localStorage"in window&&null!==localStorage)?(localStorage.setItem("test","1"),localStorage.removeItem("test")):t=!1}catch(e){t=!1}return this.supported=t,t},t}();s.supported=!1;var i=function(){function t(){}return t.clear=function(){this.isSessionStorageSupported()&&sessionStorage.clear()},t.delete=function(t){this.isSessionStorageSupported()&&sessionStorage.removeItem(t)},t.exist=function(t){return!!this.isSessionStorageSupported()&&void 0!==sessionStorage.getItem(t)},t.get=function(t){var e=null;if(this.isSessionStorageSupported())try{var r=sessionStorage.getItem(t);null!=r&&(e=JSON.parse(r))}catch(e){console.log("SessionStorageService.get.error parsing",t,e)}return e},t.set=function(t,e){if(this.isSessionStorageSupported())try{var r=new Map,o=JSON.stringify(e,(function(t,e){if("object"==typeof e&&null!==e){if(r.has(e))return;r.set(e,!0)}return e}));sessionStorage.setItem(t,o)}catch(r){console.log("SessionStorageService.set.error serializing",t,e,r)}},t.isSessionStorageSupported=function(){if(this.supported)return!0;var t=!1;try{(t="sessionStorage"in window&&null!==sessionStorage)?(sessionStorage.setItem("test","1"),sessionStorage.removeItem("test")):t=!1}catch(e){t=!1}return this.supported=t,t},t}();function u(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}i.supported=!1;var a,c=[],l=[],S=function(t){var e,r;function o(){return t.apply(this,arguments)||this}return r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,o}(e.Module);function p(e){return function(r){var o;return e.state=function(n){n.error=null,o=r(n),n.busy=!1,e.type===t.StoreType.Local&&s.set(e.key,n),e.type===t.StoreType.Session&&i.set(e.key,n)},o}}function f(t){return function(e){return t.state=function(t){t.error=e,t.busy=!1},o.of()}}S.meta={declarations:[].concat(c,l),exports:[].concat(c,l)},(a=t.StoreType||(t.StoreType={}))[a.Memory=1]="Memory",a[a.Session=2]="Session",a[a.Local=3]="Local";var g=function(){function e(e,n,s){void 0===e&&(e={}),void 0===n&&(n=t.StoreType.Memory),void 0===s&&(s="store"),this.type=n,this.key="rxcomp_"+s,e.busy=!1,e.error=null;var i=new o.BehaviorSubject(e);this.setState=function(t){return function(e){t.next(r.produce(t.getValue(),(function(t){return"function"==typeof e&&e(t),t})))}}(i),this.state$=i.asObservable()}var n,s,i;return e.prototype.setState=function(t){},n=e,(s=[{key:"state",set:function(t){this.setState(t)}}])&&u(n.prototype,s),i&&u(n,i),e}();return t.LocalStorageService=s,t.SessionStorageService=i,t.Store=g,t.StoreModule=S,t.useStore=function(e,r,u){var a=new g(e,r,u);return{busy:function(){return function(t){return o.of(null).pipe(n.filter((function(){var e;return t.state=function(t){(e=t.busy)||(t.busy=!0,t.error=null)},!e})))}(a)},getState:function(e){return function(e,r){return o.of(null).pipe(n.map((function(){var o=null;return e.type===t.StoreType.Local?(o=s.get(e.key))&&"function"==typeof r&&(o=r(o)):e.type===t.StoreType.Session&&(o=i.get(e.key))&&"function"==typeof r&&(o=r(o)),o})),n.filter((function(t){return null!==t})))}(a,e)},setState:p(a),setError:f(a),state$:a.state$}},t}({},rxcomp,immer,rxjs,rxjs.operators);
//# sourceMappingURL=rxcomp-store.min.js.map