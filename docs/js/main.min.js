/**
 * @license rxcomp-store v1.0.0-beta.10
 * (c) 2020 Luca Zampetti <lzampetti@gmail.com>
 * License: MIT
 */
!function(t,e,n,r){"use strict";var o="default"in t?t.default:t,i="default"in e?e.default:e,a="default"in n?n.default:n,s="default"in r?r.default:r;function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var f=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).active=!1,e}return l(e,t),e.prototype.onToggle=function(){this.active=!this.active,this.pushChanges()},e}(t.Component);f.meta={selector:"json-component",inputs:["item"],template:'\n\t\t<div class="rxc-block">\n\t\t\t<div class="rxc-head">\n\t\t\t\t<span class="rxc-head__title" (click)="onToggle()">\n\t\t\t\t\t<span *if="!active">+ json </span>\n\t\t\t\t\t<span *if="active">- json </span>\n\t\t\t\t\t<span [innerHTML]="item"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<ul class="rxc-list" *if="active">\n\t\t\t\t<li class="rxc-list__item">\n\t\t\t\t\t<span class="rxc-list__value" [innerHTML]="item | json"></span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>'};var p=function(){function t(){}return t.encode=function(t){var e=null;try{var n=new Map,r=JSON.stringify(t,(function(t,e){if("object"==typeof e&&null!=e){if(n.has(e))return;n.set(e,!0)}return e}));e=btoa(encodeURIComponent(r))}catch(e){console.warn("StorageService.encode.error",t,e)}return e},t.decode=function(t){var e;if(t)try{e=JSON.parse(decodeURIComponent(atob(t)))}catch(n){e=t}return e},t.isSupported=function(t){var e,n=!1;try{e=window[t];var r="__storage_test__";e.setItem(r,r),e.removeItem(r),n=!0}catch(t){n=t instanceof DOMException&&(22===t.code||1014===t.code||"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&Boolean(e&&0!==e.length)}return n},t}();p.supported=!1;var d=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.clear=function(){var t=this;this.toRawArray().forEach((function(e){t.setter(e.name,"",-1)}))},e.delete=function(t){this.setter(t,"",-1)},e.exist=function(t){return-1!==document.cookie.indexOf(";"+t+"=")||0===document.cookie.indexOf(t+"=")},e.get=function(t){return this.decode(this.getRaw(t))},e.set=function(t,e,n){this.setter(t,this.encode(e),n)},e.getRaw=function(t){var e=null,n=this.toRawArray().find((function(e){return e.name===t}));return n&&(e=n.value),e},e.setRaw=function(t,e,n){this.setter(t,e,n)},e.toArray=function(){var t=this;return this.toRawArray().map((function(e){return e.value=t.decode(e.value),e}))},e.toRawArray=function(){return document.cookie.split(";").map((function(t){var e=t.split("=");return{name:e[0].trim(),value:e[1]?e[1].trim():null}})).filter((function(t){return""!==t.name}))},e.setter=function(t,e,n){var r;if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires="+o.toUTCString()}else r="";document.cookie=t+"="+e+r+"; path=/",this.items$.next(this.toArray())},e.isSupported=function(){return"undefined"!=typeof window&&void 0!==window.document},e}(p);d.items$=new n.ReplaySubject(1);var h=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).active=!1,e.items=[],e}l(n,t);var r=n.prototype;return r.onInit=function(){var t=this;this.items=d.toArray(),d.items$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges()}))},r.onToggle=function(){this.active=!this.active,this.pushChanges()},r.onClear=function(){d.clear()},r.onRemove=function(t){d.delete(t.name)},n}(t.Component);h.meta={selector:"cookie-storage-component",template:'\n\t\t<div class="rxc-block">\n\t\t\t<div class="rxc-head">\n\t\t\t\t<span class="rxc-head__title" (click)="onToggle()">\n\t\t\t\t\t<span *if="!active">+ cookie</span>\n\t\t\t\t\t<span *if="active">- cookie</span>\n\t\t\t\t\t<span [innerHTML]="\' {\' + items.length + \')\'"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="rxc-head__remove" (click)="onClear()">x</span>\n\t\t\t</div>\n\t\t\t<ul class="rxc-list" *if="active">\n\t\t\t\t<li class="rxc-list__item" *for="let item of items">\n\t\t\t\t\t<span class="rxc-list__name" [innerHTML]="item.name"></span>\n\t\t\t\t\t<span class="rxc-list__value" [innerHTML]="item.value | json"></span>\n\t\t\t\t\t<span class="rxc-list__remove" (click)="onRemove(item)">x</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>'};var v=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.clear=function(){this.isSupported()&&(localStorage.clear(),this.items$.next(this.toArray()))},e.delete=function(t){this.isSupported()&&(localStorage.removeItem(t),this.items$.next(this.toArray()))},e.exist=function(t){return!!this.isSupported()&&void 0!==localStorage.getItem(t)},e.get=function(t){return this.decode(this.getRaw(t))},e.set=function(t,e){this.setRaw(t,this.encode(e))},e.getRaw=function(t){var e=null;return this.isSupported()&&(e=localStorage.getItem(t)),e},e.setRaw=function(t,e){e&&this.isSupported()&&(localStorage.setItem(t,e),this.items$.next(this.toArray()))},e.toArray=function(){var t=this;return this.toRawArray().map((function(e){return e.value=t.decode(e.value),e}))},e.toRawArray=function(){var t=this;return this.isSupported()?Object.keys(localStorage).map((function(e){return{name:e,value:t.getRaw(e)}})):[]},e.isSupported=function(){return!!this.supported||p.isSupported("localStorage")},e}(p);v.items$=new n.ReplaySubject(1);var m=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).active=!1,e.items=[],e}l(n,t);var r=n.prototype;return r.onInit=function(){var t=this;this.items=v.toArray(),v.items$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges()}))},r.onToggle=function(){this.active=!this.active,this.pushChanges()},r.onClear=function(){v.clear()},r.onRemove=function(t){v.delete(t.name)},n}(t.Component);m.meta={selector:"local-storage-component",template:'\n\t\t<div class="rxc-block">\n\t\t\t<div class="rxc-head">\n\t\t\t\t<span class="rxc-head__title" (click)="onToggle()">\n\t\t\t\t\t<span *if="!active">+ localStorage</span>\n\t\t\t\t\t<span *if="active">- localStorage</span>\n\t\t\t\t\t<span [innerHTML]="\' {\' + items.length + \')\'"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="rxc-head__remove" (click)="onClear()">x</span>\n\t\t\t</div>\n\t\t\t<ul class="rxc-list" *if="active">\n\t\t\t\t<li class="rxc-list__item" *for="let item of items">\n\t\t\t\t\t<span class="rxc-list__name" [innerHTML]="item.name"></span>\n\t\t\t\t\t<span class="rxc-list__value" [innerHTML]="item.value | json"></span>\n\t\t\t\t\t<span class="rxc-list__remove" (click)="onRemove(item)">x</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>'};var y=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.clear=function(){this.isSupported()&&(sessionStorage.clear(),this.items$.next(this.toArray()))},e.delete=function(t){this.isSupported()&&(sessionStorage.removeItem(t),this.items$.next(this.toArray()))},e.exist=function(t){return!!this.isSupported()&&void 0!==sessionStorage.getItem(t)},e.get=function(t){return this.decode(this.getRaw(t))},e.set=function(t,e){this.setRaw(t,this.encode(e))},e.getRaw=function(t){var e=null;return this.isSupported()&&(e=sessionStorage.getItem(t)),e},e.setRaw=function(t,e){e&&this.isSupported()&&(sessionStorage.setItem(t,e),this.items$.next(this.toArray()))},e.toArray=function(){var t=this;return this.toRawArray().map((function(e){return e.value=t.decode(e.value),e}))},e.toRawArray=function(){var t=this;return this.isSupported()?Object.keys(sessionStorage).map((function(e){return{name:e,value:t.getRaw(e)}})):[]},e.isSupported=function(){return!!this.supported||p.isSupported("sessionStorage")},e}(p);y.items$=new n.ReplaySubject(1);var g=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).active=!1,e.items=[],e}l(n,t);var r=n.prototype;return r.onInit=function(){var t=this;this.items=y.toArray(),y.items$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(e){t.items=e,t.pushChanges()}))},r.onToggle=function(){this.active=!this.active,this.pushChanges()},r.onClear=function(){y.clear()},r.onRemove=function(t){y.delete(t.name)},n}(t.Component);g.meta={selector:"session-storage-component",template:'\n\t\t<div class="rxc-block">\n\t\t\t<div class="rxc-head">\n\t\t\t\t<span class="rxc-head__title" (click)="onToggle()">\n\t\t\t\t\t<span *if="!active">+ sessionStorage</span>\n\t\t\t\t\t<span *if="active">- sessionStorage</span>\n\t\t\t\t\t<span [innerHTML]="\' {\' + items.length + \')\'"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="rxc-head__remove" (click)="onClear()">x</span>\n\t\t\t</div>\n\t\t\t<ul class="rxc-list" *if="active">\n\t\t\t\t<li class="rxc-list__item" *for="let item of items">\n\t\t\t\t\t<span class="rxc-list__name" [innerHTML]="item.name"></span>\n\t\t\t\t\t<span class="rxc-list__value" [innerHTML]="item.value | json"></span>\n\t\t\t\t\t<span class="rxc-list__remove" (click)="onRemove(item)">x</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>'};var S=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e.transform=function(t){var e=new Map;return JSON.stringify(t,(function(t,n){if("object"==typeof n&&null!=n){if(e.has(n))return"#ref";e.set(n,!0)}return n}),2)},e}(t.Pipe);S.meta={name:"json"};var _,b=[f,h,m,g],w=[S],x=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e}(t.Module);function O(t){return function(e){var n;return t.state=function(r){r.error=null,n=e(r),r.busy=!1,t.type===_.Local&&v.set(t.key,r),t.type===_.Session&&y.set(t.key,r),t.type===_.Cookie&&d.set(t.key,r,365)},n}}function k(t){return function(e){return t.state=function(t){t.error=e,t.busy=!1},n.of()}}x.meta={declarations:[].concat(b,w),exports:[].concat(b,w)},function(t){t[t.Memory=1]="Memory",t[t.Session=2]="Session",t[t.Local=3]="Local",t[t.Cookie=4]="Cookie"}(_||(_={}));var j=function(){function t(t,e,o){void 0===t&&(t={}),void 0===e&&(e=_.Memory),void 0===o&&(o="store"),this.type=e,this.key="rxcomp_"+o,t.busy=!1,t.error=null;var i=new n.BehaviorSubject(t);this.setState=function(t){return function(e){t.next(r.produce(t.getValue(),(function(t){return"function"==typeof e&&e(t),t})))}}(i),this.state$=i.asObservable()}return t.prototype.setState=function(t){},c(t,[{key:"state",set:function(t){this.setState(t)}}]),t}();function M(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function I(t,e){return t(e={exports:{}},e.exports),e.exports}var $=I((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.clear=function(){this.isLocalStorageSupported()&&localStorage.clear()},t.delete=function(t){this.isLocalStorageSupported()&&localStorage.removeItem(t)},t.exist=function(t){return!!this.isLocalStorageSupported()&&void 0!==localStorage.getItem(t)},t.get=function(t){var e=null;if(this.isLocalStorageSupported())try{var n=localStorage.getItem(t);null!=n&&(e=JSON.parse(n))}catch(e){console.log("LocalStorageService.get.error parsing",t,e)}return e},t.set=function(t,e){if(this.isLocalStorageSupported())try{var n=new Map,r=JSON.stringify(e,(function(t,e){if("object"==typeof e&&null!==e){if(n.has(e))return;n.set(e,!0)}return e}));localStorage.setItem(t,r)}catch(n){console.log("LocalStorageService.set.error serializing",t,e,n)}},t.isLocalStorageSupported=function(){if(this.supported)return!0;var t=!1;try{(t="localStorage"in window&&null!==localStorage)?(localStorage.setItem("test","1"),localStorage.removeItem("test")):t=!1}catch(e){t=!1}return this.supported=t,t},t.supported=!1,t}();e.default=n}));M($);var R=I((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.clear=function(){this.isSessionStorageSupported()&&sessionStorage.clear()},t.delete=function(t){this.isSessionStorageSupported()&&sessionStorage.removeItem(t)},t.exist=function(t){return!!this.isSessionStorageSupported()&&void 0!==sessionStorage.getItem(t)},t.get=function(t){var e=null;if(this.isSessionStorageSupported())try{var n=sessionStorage.getItem(t);null!=n&&(e=JSON.parse(n))}catch(e){console.log("SessionStorageService.get.error parsing",t,e)}return e},t.set=function(t,e){if(this.isSessionStorageSupported())try{var n=new Map,r=JSON.stringify(e,(function(t,e){if("object"==typeof e&&null!==e){if(n.has(e))return;n.set(e,!0)}return e}));sessionStorage.setItem(t,r)}catch(n){console.log("SessionStorageService.set.error serializing",t,e,n)}},t.isSessionStorageSupported=function(){if(this.supported)return!0;var t=!1;try{(t="sessionStorage"in window&&null!==sessionStorage)?(sessionStorage.setItem("test","1"),sessionStorage.removeItem("test")):t=!1}catch(e){t=!1}return this.supported=t,t},t.supported=!1,t}();e.default=n}));M(R);
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var T=function(t,e){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var C=function(){return(C=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var L=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function A(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function P(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function E(t){return this instanceof E?(this.v=t,this):new E(t)}var H=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};var D=Object.freeze({__proto__:null,__extends:function(t,e){function n(){this.constructor=t}T(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},get __assign(){return C},__rest:function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},__decorate:function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},__param:function(t,e){return function(n,r){e(n,r,t)}},__metadata:function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},__awaiter:function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},__generator:function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},__createBinding:L,__exportStar:function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||L(e,t,n)},__values:A,__read:P,__spread:function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(P(arguments[e]));return t},__spreadArrays:function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r},__await:E,__asyncGenerator:function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){o[t]&&(r[t]=function(e){return new Promise((function(n,r){i.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=o[t](e)).value instanceof E?Promise.resolve(n.value.v).then(u,c):l(i[0][2],n)}catch(t){l(i[0][3],t)}var n}function u(t){s("next",t)}function c(t){s("throw",t)}function l(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}},__asyncDelegator:function(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,o){e[r]=t[r]?function(e){return(n=!n)?{value:E(t[r](e)),done:"return"===r}:o?o(e):e}:o}},__asyncValues:function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=A(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,o,(e=t[n](e)).done,e.value)}))}}},__makeTemplateObject:function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},__importStar:function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&L(e,t,n);return H(e,t),e},__importDefault:function(t){return t&&t.__esModule?t:{default:t}},__classPrivateFieldGet:function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},__classPrivateFieldSet:function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}),U=I((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=[],r=[],i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return D.__extends(e,t),e.meta={declarations:D.__spreadArrays(n,r),exports:D.__spreadArrays(n,r)},e}(o.Module);e.default=i}));M(U);var N=I((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n,r=D.__importDefault($),o=D.__importDefault(R);function u(t){return function(e){var i;return t.state=function(a){a.error=null,i=e(a),a.busy=!1,t.type===n.Local&&r.default.set(t.key,a),t.type===n.Session&&o.default.set(t.key,a)},i}}function c(t){return function(e){return t.state=function(t){t.error=e,t.busy=!1},a.of()}}!function(t){t[t.Memory=1]="Memory",t[t.Session=2]="Session",t[t.Local=3]="Local"}(n=e.StoreType||(e.StoreType={}));var l=function(){function t(t,e,r){void 0===t&&(t={}),void 0===e&&(e=n.Memory),void 0===r&&(r="store"),this.type=e,this.key="rxcomp_"+r,t.busy=!1,t.error=null;var o=new a.BehaviorSubject(t);this.setState=function(t){return function(e){t.next(s.produce(t.getValue(),(function(t){return"function"==typeof e&&e(t),t})))}}(o),this.state$=o.asObservable()}return Object.defineProperty(t.prototype,"state",{set:function(t){this.setState(t)},enumerable:!0,configurable:!0}),t.prototype.setState=function(t){},t}();e.Store=l,e.useStore=function(t,e,s){var f=new l(t,e,s);return{busy:function(){return function(t){return a.of(null).pipe(i.filter((function(){var e;return t.state=function(t){(e=t.busy)||(t.busy=!0,t.error=null)},!e})))}(f)},getState:function(t){return function(t,e){return a.of(null).pipe(i.map((function(){var i=null;return t.type===n.Local?(i=r.default.get(t.key))&&"function"==typeof e&&(i=e(i)):t.type===n.Session&&(i=o.default.get(t.key))&&"function"==typeof e&&(i=e(i)),i})),i.filter((function(t){return null!==t})))}(f,t)},setState:u(f),setError:c(f),state$:f.state$}}}));M(N);N.StoreType,N.Store,N.useStore;var J=I((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.LocalStorageService=$.default,e.SessionStorageService=R.default,e.StoreModule=U.default,e.Store=N.Store,e.StoreType=N.StoreType,e.useStore=N.useStore}));M(J);var B=J.LocalStorageService,z=J.SessionStorageService,G=(J.StoreModule,J.Store,J.StoreType,J.useStore,0),V=function(){function t(){}return t.load$=function(t){return n.of(new Array(1).fill(0).map((function(t,e){var n=(new Date).valueOf()+e;return{id:n,name:G+++" item "+n}}))).pipe(e.delay(300*Math.random()))},t.addItem$=function(t,r){var o=(new Date).valueOf();return Math.random()<.25?n.of(1).pipe(e.delay(300*Math.random()),e.switchMap((function(){return n.throwError("simulated error "+o)}))):n.of({id:o,name:G+++" item "+o}).pipe(e.delay(300*Math.random()))},t.clearItems$=function(t){return n.of([]).pipe(e.delay(300*Math.random()))},t.remove$=function(t,r){return n.of(r).pipe(e.delay(300*Math.random()))},t.patch$=function(t,r){return n.of(r).pipe(e.delay(300*Math.random()))},t}(),F=function(t,r,o){var i=new j(t,r,o);return{busy:function(){return function(t){return n.of(null).pipe(e.filter((function(){var e;return t.state=function(t){(e=t.busy)||(t.busy=!0,t.error=null)},!e})))}(i)},getState:function(t){return function(t,r){return n.of(null).pipe(e.map((function(){var e=null;return t.type===_.Local?e=v.get(t.key):t.type===_.Session?e=y.get(t.key):t.type===_.Cookie&&(e=d.get(t.key)),e&&"function"==typeof r&&(e=r(e)),e})),e.filter((function(t){return null!=t})))}(i,t)},setState:O(i),setError:k(i),state$:i.state$}}({todolist:[]},_.Session,"todolist"),Q=F.state$,W=F.busy,q=F.getState,K=F.setState,X=F.setError,Y=function(){function t(){}return t.loadWithCache$=function(){return W().pipe(e.switchMap((function(){return n.merge(q((function(t){return t.todolist})),V.load$("url")).pipe(e.tap((function(t){return K((function(e){return e.todolist=t}))})),e.catchError((function(t){return X(t)})))})))},t.load$=function(){return W().pipe(e.switchMap((function(){return V.load$("url").pipe(e.tap((function(t){return K((function(e){return e.todolist=t}))})),e.catchError((function(t){return X(t)})))})))},t.addItem$=function(){return W().pipe(e.switchMap((function(){return V.addItem$("url").pipe(e.tap((function(t){return K((function(e){e.todolist.push(t)}))})),e.catchError((function(t){return X(t)})))})))},t.clearItems$=function(){return W().pipe(e.switchMap((function(){return V.clearItems$("url").pipe(e.tap((function(t){return K((function(e){return e.todolist=t}))})),e.catchError((function(t){return X(t)})))})))},t.removeItem$=function(t){return W().pipe(e.switchMap((function(){return V.remove$("url",t).pipe(e.tap((function(t){return K((function(e){var n=e.todolist.reduce((function(e,n,r){return n.id===t?r:e}),-1);-1!==n&&e.todolist.splice(n,1)}))})),e.catchError((function(t){return X(t)})))})))},t.toggleCompleted$=function(t){return W().pipe(e.switchMap((function(){return V.patch$("url",t).pipe(e.tap((function(t){return K((function(e){var n=e.todolist.find((function(e){return e.id===t.id}));n&&(n.completed=!n.completed)}))})),e.catchError((function(t){return X(t)})))})))},c(t,null,[{key:"state$",get:function(){return Q}}]),t}(),Z=0,tt=function(n){function r(){return n.apply(this,arguments)||this}l(r,n);var o=r.prototype;return o.onInit=function(){var n=this;t.getContext(this).node.classList.add("init"),Y.state$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(t){n.state=t,n.pushChanges(),console.log("call",Z++)})),Y.loadWithCache$().pipe(e.first()).subscribe(console.log)},o.onToggle=function(t){Y.toggleCompleted$(t).subscribe(console.log)},o.onAddItem=function(){Y.addItem$().subscribe(console.log)},o.onClearItems=function(){Y.clearItems$().subscribe(console.log)},o.removeItem=function(t){Y.removeItem$(t).subscribe(console.log)},o.clearCookie=function(){d.clear()},o.clearLocalStorage=function(){B.clear()},o.clearSessionStorage=function(){z.clear()},r}(t.Component);tt.meta={selector:"[app-component]"};var et=function(t){function n(){return t.apply(this,arguments)||this}return l(n,t),n.prototype.onInit=function(){var t=this;Y.state$.pipe(e.takeUntil(this.unsubscribe$)).subscribe((function(e){t.todolist=e.todolist,t.pushChanges()}))},n}(t.Component);et.meta={selector:"counter-component",template:'#items <span [innerHTML]="todolist.length"></span>'};var nt=function(t){function e(){return t.apply(this,arguments)||this}return l(e,t),e}(t.Module);nt.meta={imports:[t.CoreModule,x],declarations:[et],bootstrap:tt},t.Browser.bootstrap(nt)}(rxcomp,rxjs.operators,rxjs,immer);
//# sourceMappingURL=main.min.js.map