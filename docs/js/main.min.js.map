{"version":3,"sources":["test/js/main.ts","../../src/json/json.component.ts","../../src/storage/storage.service.ts","../../src/storage/cookie-storage.service.ts","../../src/storage/cookie-storage.component.ts","../../src/storage/local-storage.service.ts","../../src/storage/local-storage.component.ts","../../src/storage/session-storage.service.ts","../../src/storage/session-storage.component.ts","../../src/json/json.pipe.ts","../../src/store.module.ts","../../src/store/store.ts","../../test/js/api/api.service.ts","../../test/js/todo/todo.service.ts","../../test/js/app.component.ts","../../test/js/counter/counter.component.ts","../../test/js/app.module.ts","../../test/js/main.ts"],"names":["rxcomp","operators","rxjs","immer","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","Constructor","protoProps","staticProps","prototype","_inheritsLoose","subClass","superClass","create","constructor","__proto__","JsonComponent","_this","_Component","apply","this","arguments","active","onToggle","pushChanges","Component","selector","inputs","template","StorageService","encode","value","encodedJson","cache","Map","json","JSON","stringify","has","set","btoa","encodeURIComponent","error","console","warn","decode","parse","decodeURIComponent","atob","isSupported","type","storage","flag","window","x","setItem","removeItem","DOMException","code","name","Boolean","CookieStorageService","_StorageService","clear","toRawArray","forEach","setter","delete","exist","document","cookie","indexOf","get","getRaw","days","find","setRaw","toArray","_this2","map","split","items","trim","filter","expires","date","Date","setTime","getTime","toUTCString","items$","next","ReplaySubject","CookieStorageComponent","_proto","onInit","pipe","takeUntil","unsubscribe$","subscribe","onClear","onRemove","item","LocalStorageService","localStorage","undefined","getItem","keys","supported","LocalStorageComponent","SessionStorageService","sessionStorage","SessionStorageComponent","JsonPipe","_Pipe","transform","Pipe","meta","StoreType","factories","pipes","StoreModule","_Module","Module","declarations","concat","exports","Store","state","Memory","busy","state_","BehaviorSubject","callback","produce","getValue","draft","makeNext","nextError","of","makeNextError","select","makeSelect","state$","asObservable","busy$","cached$","Local","Session","Cookie","select$","distinctUntilChanged","reducer","_this3","source","defer","data","catchState","errorReducer","_this4","catchError","store","PROGRESSIVE_INDEX","ApiService","load$","url","Array","fill","id","valueOf","delay","Math","random","addItem$","switchMap","throwError","clearItems$","remove$","patch$","_useStore","todolist","bind","TodoService","loadWithCache$","merge","log","push","removeItem$","index","reduce","p","c","splice","toggleCompleted$","stateItem","completed","AppComponent","getContext","node","classList","add","first","onAddItem","onClearItems","clearCookie","clearLocalStorage","clearSessionStorage","CounterComponent","AppModule","imports","CoreModule","bootstrap","Browser"],"mappings":";;;;;CAMC,SAAUA,EAAQC,EAAWC,EAAMC,GAClC,aAEA,SAASC,EAAkBC,EAAQC,GACjC,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CACrC,IAAIE,EAAaH,EAAMC,GACvBE,EAAWC,WAAaD,EAAWC,aAAc,EACjDD,EAAWE,cAAe,EACtB,UAAWF,IAAYA,EAAWG,UAAW,GACjDC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAIlD,SAASO,EAAaC,EAAaC,EAAYC,GAG7C,OAFID,GAAYd,EAAkBa,EAAYG,UAAWF,GACrDC,GAAaf,EAAkBa,EAAaE,GACzCF,EAGT,SAASI,EAAeC,EAAUC,GAChCD,EAASF,UAAYP,OAAOW,OAAOD,EAAWH,WAC9CE,EAASF,UAAUK,YAAcH,EACjCA,EAASI,UAAYH,EAGvB,IC7BmBI,EAAAA,SAAAA,GAArB,SAAAA,IDiCM,IAAIC,EAIJ,OAFAA,EAAQC,EAAWC,MAAMC,KAAMC,YAAcD,MCjClDE,QAAkB,EDmCNL,EAUT,OAjBAP,EAAeM,EAAeE,GAUjBF,EAAcP,UCpC9Bc,SAAA,WACCH,KAAKE,QAAUF,KAAKE,OACpBF,KAAKI,eDyCIR,EC/CUA,CAAsBS,EAAAA,WASnCT,EAAAA,KAAqB,CAC3BU,SAAU,iBACVC,OAAQ,CAAC,QACTC,SAAQ,oeD2CR,IEnDmBC,EAAAA,WFoDjB,SAASA,KAyDT,OAvDAA,EElDIC,OAAP,SAAcC,GACb,IAAIC,EAA6B,KACjC,IACC,IAAMC,EAA2B,IAAIC,IAC/BC,EAAeC,KAAKC,UAAUN,GAAO,SAAU3B,EAAK2B,GACzD,GAAqB,iBAAVA,GAA+B,MAATA,EAAe,CAC/C,GAAIE,EAAMK,IAAIP,GAEb,OAEDE,EAAMM,IAAIR,GAAO,GAElB,OAAOA,KAERC,EAAcQ,KAAKC,mBAAmBN,IACrC,MAAOO,GACRC,QAAQC,KAAK,8BAA+Bb,EAAOW,GAEpD,OAAOV,GFwDLH,EErDIgB,OAAP,SAAcb,GACb,IAAID,EACJ,GAAIC,EACH,IACCD,EAAQK,KAAKU,MAAMC,mBAAmBC,KAAKhB,KAC1C,MAAOU,GAERX,EAAQC,EAGV,OAAOD,GFyDLF,EEtDIoB,YAAP,SAAmBC,GAClB,IACIC,EADAC,GAAgB,EAEpB,IACCD,EAAUE,OAAOH,GACjB,IAAMI,EAAI,mBACVH,EAAQI,QAAQD,EAAGA,GACnBH,EAAQK,WAAWF,GACnBF,GAAO,EACN,MAAOV,GACRU,EAAOV,aAAiBe,eAER,KAAff,EAAMgB,MAES,OAAfhB,EAAMgB,MAGS,uBAAfhB,EAAMiB,MAES,+BAAfjB,EAAMiB,OAENC,QAAQT,GAA8B,IAAnBA,EAAQtD,QAE7B,OAAOuD,GFgDEvB,EE7GUA,GAEbA,EAAAA,WAAqB,EF+G3B,IGpHmBgC,EAAAA,SAAAA,GHuHjB,SAASA,IACP,OAAOC,EAAgB3C,MAAMC,KAAMC,YAAcD,KAsFnD,OAzFAV,EAAemD,EAAsBC,GAMrCD,EGvHIE,MAAP,WHwHK,IAAI9C,EAAQG,KGvHhBA,KAAK4C,aAAaC,SAAQ,SAAAX,GACzBrC,EAAKiD,OAAOZ,EAAEK,KAAM,IAAK,OH6HxBE,EGxHIM,OAAP,SAAcR,GACbvC,KAAK8C,OAAOP,EAAM,IAAK,IH2HrBE,EGxHIO,MAAP,SAAaT,GACZ,OAAsD,IAA/CU,SAASC,OAAOC,QAAQ,IAAMZ,EAAO,MAAuD,IAAxCU,SAASC,OAAOC,QAAQZ,EAAO,MH2HxFE,EGxHIW,IAAP,SAAWb,GACV,OAAOvC,KAAKyB,OAAOzB,KAAKqD,OAAOd,KH2H7BE,EGxHItB,IAAP,SAAWoB,EAAc5B,EAAY2C,GACpCtD,KAAK8C,OAAOP,EAAMvC,KAAKU,OAAOC,GAAQ2C,IH2HpCb,EGxHIY,OAAP,SAAcd,GACb,IAAI5B,EAAQ,KAENuC,EADUlD,KAAK4C,aACEW,MAAK,SAAArB,GAAC,OAAIA,EAAEK,OAASA,KAI5C,OAHIW,IACHvC,EAAQuC,EAAOvC,OAETA,GH+HL8B,EG5HIe,OAAP,SAAcjB,EAAc5B,EAAe2C,GAC1CtD,KAAK8C,OAAOP,EAAM5B,EAAO2C,IH+HvBb,EG5HIgB,QAAP,WH6HK,IAAIC,EAAS1D,KG5HjB,OAAOA,KAAK4C,aAAae,KAAI,SAAAzB,GAE5B,OADAA,EAAEvB,MAAQ+C,EAAKjC,OAAOS,EAAEvB,OACjBuB,MHkINO,EG9HIG,WAAP,WACC,OAAOK,SAASC,OAAOU,MAAM,KAAKD,KAAI,SAAAzB,GACrC,IAAM2B,EAAQ3B,EAAE0B,MAAM,KACtB,MAAO,CAAErB,KAAMsB,EAAM,GAAGC,OAAQnD,MAAOkD,EAAM,GAAKA,EAAM,GAAGC,OAAS,SAClEC,QAAO,SAAA7B,GAAC,MAAe,KAAXA,EAAEK,SHsIfE,EGnIIK,OAAP,SAAcP,EAAc5B,EAAY2C,GACvC,IAAIU,EACJ,GAAIV,EAAM,CACT,IAAMW,EAAO,IAAIC,KACjBD,EAAKE,QAAQF,EAAKG,UAAoB,GAAPd,EAAY,GAAK,GAAK,KACrDU,EAAU,aAAeC,EAAKI,mBAE9BL,EAAU,GAEXf,SAASC,OAASX,EAAO,IAAM5B,EAAQqD,EAAU,WACjDhE,KAAKsE,OAAOC,KAAKvE,KAAKyD,YHwIpBhB,EGrIIZ,YAAP,WAEC,MAD6C,oBAAXI,aAAqD,IAApBA,OAAOgB,UHyIjER,EG9MUA,CAA6BhC,GAE1CgC,EAAAA,OAAwC,IAAI+B,EAAAA,cAAc,GHgNhE,IIhNmBC,EAAAA,SAAAA,GAArB,SAAAA,IJoNM,IAAI5E,EAKJ,OAHAA,EAAQC,EAAWC,MAAMC,KAAMC,YAAcD,MIpNlDE,QAAkB,EAClBL,EAAAgE,MAAwB,GJsNZhE,EARTP,EAAemF,EAAwB3E,GAWvC,IAAI4E,EAASD,EAAuBpF,UA0BpC,OAxBAqF,EIzNHC,OAAA,WJ0NK,IAAIjB,EAAS1D,KIzNjBA,KAAK6D,MAAQpB,EAAqBgB,UAClChB,EAAqB6B,OAAOM,KAC3BC,EAAAA,UAAU7E,KAAK8E,eACdC,WAAU,SAAAlB,GACXH,EAAKG,MAAQA,EACbH,EAAKtD,kBJ8NJsE,EI1NHvE,SAAA,WACCH,KAAKE,QAAUF,KAAKE,OACpBF,KAAKI,eJ6NHsE,EI1NHM,QAAA,WACCvC,EAAqBE,SJ6NnB+B,EI1NHO,SAAA,SAASC,GACRzC,EAAqBM,OAAOmC,EAAK3C,OJ6NxBkC,EItPUA,CAA+BpE,EAAAA,WA4B5CoE,EAAAA,KAAqB,CAC3BnE,SAAU,2BACVE,SAAQ,uvBJ+NR,IK/PmB2E,EAAAA,SAAAA,GLkQjB,SAASA,IACP,OAAOzC,EAAgB3C,MAAMC,KAAMC,YAAcD,KAkFnD,OArFAV,EAAe6F,EAAqBzC,GAMpCyC,EKlQIxC,MAAP,WACK3C,KAAK6B,gBACRuD,aAAazC,QACb3C,KAAKsE,OAAOC,KAAKvE,KAAKyD,aLsQrB0B,EKlQIpC,OAAP,SAAcR,GACTvC,KAAK6B,gBACRuD,aAAahD,WAAWG,GACxBvC,KAAKsE,OAAOC,KAAKvE,KAAKyD,aLsQrB0B,EKlQInC,MAAP,SAAaT,GACZ,QAAIvC,KAAK6B,oBAC8BwD,IAA/BD,aAAaE,QAAQ/C,ILwQ3B4C,EKlQI/B,IAAP,SAAWb,GACV,OAAOvC,KAAKyB,OAAOzB,KAAKqD,OAAOd,KLqQ7B4C,EKlQIhE,IAAP,SAAWoB,EAAc5B,GACxBX,KAAKwD,OAAOjB,EAAMvC,KAAKU,OAAOC,KLqQ5BwE,EKlQI9B,OAAP,SAAcd,GACb,IAAI5B,EAAQ,KAIZ,OAHIX,KAAK6B,gBACRlB,EAAQyE,aAAaE,QAAQ/C,IAEvB5B,GLuQLwE,EKpQI3B,OAAP,SAAcjB,EAAc5B,GACvBA,GAASX,KAAK6B,gBACjBuD,aAAajD,QAAQI,EAAM5B,GAC3BX,KAAKsE,OAAOC,KAAKvE,KAAKyD,aLwQrB0B,EKpQI1B,QAAP,WLqQK,IAAI5D,EAAQG,KKpQhB,OAAOA,KAAK4C,aAAae,KAAI,SAAAzB,GAE5B,OADAA,EAAEvB,MAAQd,EAAK4B,OAAOS,EAAEvB,OACjBuB,ML0QNiD,EKtQIvC,WAAP,WLuQK,IAAIc,EAAS1D,KKtQjB,OAAIA,KAAK6B,cACD/C,OAAOyG,KAAKH,cAAczB,KAAI,SAAA3E,GACpC,MAAO,CACNuD,KAAMvD,EACN2B,MAAO+C,EAAKL,OAAOrE,OAId,IL4QNmG,EKxQItD,YAAP,WACC,QAAI7B,KAAKwF,WAGF/E,EAAeoB,YAAY,iBL4QzBsD,EKrVUA,CAA4B1E,GAEzC0E,EAAAA,OAAwC,IAAIX,EAAAA,cAAc,GLuVhE,IMvVmBiB,EAAAA,SAAAA,GAArB,SAAAA,IN2VM,IAAI5F,EAKJ,OAHAA,EAAQC,EAAWC,MAAMC,KAAMC,YAAcD,MM3VlDE,QAAkB,EAClBL,EAAAgE,MAAwB,GN6VZhE,EARTP,EAAemG,EAAuB3F,GAWtC,IAAI4E,EAASe,EAAsBpG,UA0BnC,OAxBAqF,EMhWHC,OAAA,WNiWK,IAAIjB,EAAS1D,KMhWjBA,KAAK6D,MAAQsB,EAAoB1B,UACjC0B,EAAoBb,OAAOM,KAC1BC,EAAAA,UAAU7E,KAAK8E,eACdC,WAAU,SAAAlB,GACXH,EAAKG,MAAQA,EACbH,EAAKtD,kBNqWJsE,EMjWHvE,SAAA,WACCH,KAAKE,QAAUF,KAAKE,OACpBF,KAAKI,eNoWHsE,EMjWHM,QAAA,WACCG,EAAoBxC,SNoWlB+B,EMjWHO,SAAA,SAASC,GACRC,EAAoBpC,OAAOmC,EAAK3C,ONoWvBkD,EM7XUA,CAA8BpF,EAAAA,WA4B3CoF,EAAAA,KAAqB,CAC3BnF,SAAU,0BACVE,SAAQ,mwBNsWR,IOtYmBkF,EAAAA,SAAAA,GPyYjB,SAASA,IACP,OAAOhD,EAAgB3C,MAAMC,KAAMC,YAAcD,KAkFnD,OArFAV,EAAeoG,EAAuBhD,GAMtCgD,EOzYI/C,MAAP,WACK3C,KAAK6B,gBACR8D,eAAehD,QACf3C,KAAKsE,OAAOC,KAAKvE,KAAKyD,aP6YrBiC,EOzYI3C,OAAP,SAAcR,GACTvC,KAAK6B,gBACR8D,eAAevD,WAAWG,GAC1BvC,KAAKsE,OAAOC,KAAKvE,KAAKyD,aP6YrBiC,EOzYI1C,MAAP,SAAaT,GACZ,QAAIvC,KAAK6B,oBACgCwD,IAAjCM,eAAeL,QAAQ/C,IP+Y7BmD,EOzYItC,IAAP,SAAWb,GACV,OAAOvC,KAAKyB,OAAOzB,KAAKqD,OAAOd,KP4Y7BmD,EOzYIvE,IAAP,SAAWoB,EAAc5B,GACxBX,KAAKwD,OAAOjB,EAAMvC,KAAKU,OAAOC,KP4Y5B+E,EOzYIrC,OAAP,SAAcd,GACb,IAAI5B,EAAQ,KAIZ,OAHIX,KAAK6B,gBACRlB,EAAQgF,eAAeL,QAAQ/C,IAEzB5B,GP8YL+E,EO3YIlC,OAAP,SAAcjB,EAAc5B,GACvBA,GAASX,KAAK6B,gBACjB8D,eAAexD,QAAQI,EAAM5B,GAC7BX,KAAKsE,OAAOC,KAAKvE,KAAKyD,aP+YrBiC,EO3YIjC,QAAP,WP4YK,IAAI5D,EAAQG,KO3YhB,OAAOA,KAAK4C,aAAae,KAAI,SAAAzB,GAE5B,OADAA,EAAEvB,MAAQd,EAAK4B,OAAOS,EAAEvB,OACjBuB,MPiZNwD,EO7YI9C,WAAP,WP8YK,IAAIc,EAAS1D,KO7YjB,OAAIA,KAAK6B,cACD/C,OAAOyG,KAAKI,gBAAgBhC,KAAI,SAAA3E,GACtC,MAAO,CACNuD,KAAMvD,EACN2B,MAAO+C,EAAKL,OAAOrE,OAId,IPmZN0G,EO/YI7D,YAAP,WACC,QAAI7B,KAAKwF,WAGF/E,EAAeoB,YAAY,mBPmZzB6D,EO5dUA,CAA8BjF,GAE3CiF,EAAAA,OAAwC,IAAIlB,EAAAA,cAAc,GP8dhE,IQ9dmBoB,EAAAA,SAAAA,GAArB,SAAAA,IRkeM,IAAI/F,EAKJ,OAHAA,EAAQC,EAAWC,MAAMC,KAAMC,YAAcD,MQlelDE,QAAkB,EAClBL,EAAAgE,MAAwB,GRoeZhE,EARTP,EAAesG,EAAyB9F,GAWxC,IAAI4E,EAASkB,EAAwBvG,UA0BrC,OAxBAqF,EQveHC,OAAA,WRweK,IAAIjB,EAAS1D,KQvejBA,KAAK6D,MAAQ6B,EAAsBjC,UACnCiC,EAAsBpB,OAAOM,KAC5BC,EAAAA,UAAU7E,KAAK8E,eACdC,WAAU,SAAAlB,GACXH,EAAKG,MAAQA,EACbH,EAAKtD,kBR4eJsE,EQxeHvE,SAAA,WACCH,KAAKE,QAAUF,KAAKE,OACpBF,KAAKI,eR2eHsE,EQxeHM,QAAA,WACCU,EAAsB/C,SR2epB+B,EQxeHO,SAAA,SAASC,GACRQ,EAAsB3C,OAAOmC,EAAK3C,OR2ezBqD,EQpgBUA,CAAgCvF,EAAAA,WA4B7CuF,EAAAA,KAAqB,CAC3BtF,SAAU,4BACVE,SAAQ,uwBR6eR,IS9gBmBqF,EAAAA,SAAAA,GTihBjB,SAASA,IACP,OAAOC,EAAM/F,MAAMC,KAAMC,YAAcD,KAmBzC,OAtBAV,EAAeuG,EAAUC,GAMzBD,ESnhBIE,UAAP,SAAiBpF,GAChB,IAAME,EAA2B,IAAIC,IAWrC,OAVqBE,KAAKC,UAAUN,GAAO,SAAU3B,EAAK2B,GACzD,GAAqB,iBAAVA,GAA+B,MAATA,EAAe,CAC/C,GAAIE,EAAMK,IAAIP,GAEb,MAAO,OAERE,EAAMM,IAAIR,GAAO,GAElB,OAAOA,IACL,ITwhBMkF,ESriBUA,CAAiBG,EAAAA,MAmBtCH,EAASI,KAAO,CACf1D,KAAM,QCfP,ICAY2D,EDANC,EAA8B,CACnCvG,EACA6E,EACAgB,EACAG,GAGKQ,EAAuB,CAC5BP,GAoBoBQ,EAAAA,SAAAA,GVghBjB,SAASA,IACP,OAAOC,EAAQvG,MAAMC,KAAMC,YAAcD,KAG3C,OANAV,EAAe+G,EAAaC,GAMrBD,EUphBUA,CAAoBE,EAAAA,QAEjCF,EAAAA,KAAoB,CAC1BG,aAAY,GAAAC,OACRN,EACAC,GAEJM,QAAO,GAAAD,OACHN,EACAC,ICrCN,SAAYF,GACXA,EAAAA,EAAAA,OAAAA,GAAA,SACAA,EAAAA,EAAAA,QAAAA,GAAA,UACAA,EAAAA,EAAAA,MAAAA,GAAA,QACAA,EAAAA,EAAAA,OAAAA,GAAA,SAJD,CAAYA,IAAAA,EAAS,KX+jBnB,IW5iBWS,EAAb,WAcC,SAAAA,EAAYC,EAAiB9E,EAAyB9C,QAA1C4H,IAAAA,IAAAA,EAAa,SAAI9E,IAAAA,IAAAA,EAAOoE,EAAUW,aAAQ7H,IAAAA,IAAAA,EAAc,SACnEgB,KAAK8B,KAAOA,EACZ9B,KAAKhB,IAAL,UAAqBA,EACrB4H,EAAME,MAAO,EACbF,EAAMtF,MAAQ,KACd,IAAMyF,EAAS,IAAIC,EAAAA,gBAAgBJ,GACnC5G,KAAKuE,KA4IP,SAAkBqC,GACjB,OAAO,SAACK,GACPL,EAAMrC,KAAK2C,EAAAA,QAAQN,EAAMO,YAAY,SAACC,GAIrC,MAHwB,mBAAbH,GACVA,EAASG,GAEHA,OAlJIC,CAASN,GACrB/G,KAAKsH,UAsJP,SAAuBV,GACtB,OAAO,SAACtF,GAMP,OALAsF,EAAMrC,KAAK2C,EAAAA,QAAQN,EAAMO,YAAY,SAACC,GAGrC,OAFAA,EAAM9F,MAAQA,EACd8F,EAAMN,MAAO,EACNM,MAEDG,EAAAA,GAAGjG,IA7JOkG,CAAcT,GAC/B/G,KAAKyH,OAgKP,SAAoBb,GACnB,OAAO,SAACK,GACP,OAAOA,EAASL,EAAMO,aAlKRO,CAAWX,GACzB/G,KAAK2H,OAASZ,EAAOa,eAvBvB,IAAAlD,EAAAiC,EAAAtH,UAAA,OAAAqF,EA0BCmD,MAAA,WX8iBK,IAAIhI,EAAQG,KW7iBhB,OAAOuH,EAAAA,GAAG,MAAM3C,KACfb,EAAAA,QAAO,WAEN,OADWlE,EAAK4H,QAAO,SAAAb,GAAK,OAAIA,EAAME,UAErCjH,EAAK+G,MAAQ,SAACQ,GACbA,EAAMN,MAAO,EACbM,EAAM9F,MAAQ,OAER,QAnCZoD,EA2CCoD,QAAA,SAAQb,GXkjBH,IAAIvD,EAAS1D,KWjjBjB,OAAOuH,EAAAA,GAAG,MAAM3C,KACfjB,EAAAA,KAAI,WACH,IAAIhD,EAAQ,KAWZ,OAVI+C,EAAK5B,OAASoE,EAAU6B,MAC3BpH,EAAQwE,EAAoB/B,IAAIM,EAAK1E,KAC3B0E,EAAK5B,OAASoE,EAAU8B,QAClCrH,EAAQ+E,EAAsBtC,IAAIM,EAAK1E,KAC7B0E,EAAK5B,OAASoE,EAAU+B,SAClCtH,EAAQ8B,EAAqBW,IAAIM,EAAK1E,MAEnC2B,GAA6B,mBAAbsG,IACnBtG,EAAQsG,EAAStG,IAEXA,KAERoD,EAAAA,QAAO,SAAC7B,GAEP,OAAY,MAALA,OA7DXwC,EAkECwD,QAAA,SAAQjB,GACP,OAAOjH,KAAK2H,OAAO/C,KAClBjB,EAAAA,IAAIsD,GACJkB,EAAAA,yBArEHzD,EAyEC+C,OAAA,SAAOR,KAzERvC,EA2ECH,KAAA,SAAK0C,KA3ENvC,EA6EC4C,UAAA,SAAUhG,GACT,OAAOiG,EAAAA,MA9ET7C,EAiFC0D,QAAA,SAAcA,GXgjBT,IAAIC,EAASrI,KW/iBjB,OAAO,SAACsI,GAAD,OAA2BC,EAAAA,OAAM,WAEvC,OAAOD,EAAO1D,KACbjB,EAAAA,KAAI,SAAC6E,GAoBJ,MAnBuB,mBAAZJ,IACVC,EAAKzB,MAAQ,SAACQ,GACbA,EAAM9F,MAAQ,KACd8G,EAAQI,EAAMpB,GACdA,EAAMN,MAAO,EACTuB,EAAKvG,OAASoE,EAAU6B,OAC3B5C,EAAoBhE,IAAIkH,EAAKrJ,IAAKoI,GAG/BiB,EAAKvG,OAASoE,EAAU8B,SAC3BtC,EAAsBvE,IAAIkH,EAAKrJ,IAAKoI,GAGjCiB,EAAKvG,OAASoE,EAAU+B,QAC3BxF,EAAqBtB,IAAIkH,EAAKrJ,IAAKoI,EAAO,OAKtCoB,WAzGZ9D,EA+GC+D,WAAA,SAAWC,GXojBN,IAAIC,EAAS3I,KWnjBjB,OAAO,SAACsI,GAAD,OACNC,EAAAA,OAAM,WAEL,OAAOD,EAAO1D,KACbgE,EAAAA,YAAW,SAAAtH,GAUV,OATAqH,EAAK/B,MAAQ,SAACQ,GACbA,EAAM9F,MAAQA,EACd8F,EAAMN,MAAO,IAGbxF,EAD2B,mBAAjBoH,EACFA,EAAapH,GAEb,MAEOiG,EAAAA,GAAGjG,GAASiG,EAAAA,cA9HlCtI,EAAA0H,EAAA,CAAA,CAAA3H,IAAA,QAAAoE,IAAA,WAOE,OAAOpD,KAAKyH,QAAO,SAACL,GAAD,OAAgBA,MAPrCjG,IAAA,SAUW8F,GACTjH,KAAKuE,KAAK0C,OAXZN,EAAA,GCvBA,ID6JyBC,EAAY9E,EAC9B+G,EC7JHC,EAA4B,EAQXC,EAAAA,WZqwBjB,SAASA,KAuCT,OArCAA,EYrwBIC,MAAP,SAAaC,GAEZ,OAAO1B,EAAAA,GAAG,IAAI2B,MAAM,GAAGC,KAAK,GAAGxF,KAAI,SAACzB,EAAG1D,GACtC,IAAM4K,GAAK,IAAIlF,MAAOmF,UAAY7K,EAClC,MAAO,CAAE4K,GAAIA,EAAI7G,KAASuG,IAAL,SAAiCM,OACnDxE,KACH0E,EAAAA,MAjBmB,IAiBLC,KAAKC,YZywBlBT,EYrwBIU,SAAP,SAAgBR,EAAa/D,GAE5B,IAAMkE,GAAK,IAAIlF,MAAOmF,UACtB,OAAIE,KAAKC,SAAW,GAEZjC,EAAAA,GAAG,GAAG3C,KACZ0E,EAAAA,MA3BkB,IA2BJC,KAAKC,UACnBE,EAAAA,WAAU,WAAA,OAAMC,EAAAA,WAAU,mBAAoBP,OAGzC7B,EAAAA,GAAG,CAAE6B,GAAIA,EAAI7G,KAASuG,IAAL,SAAiCM,IAAQxE,KAChE0E,EAAAA,MAhCmB,IAgCLC,KAAKC,YZywBlBT,EYrwBIa,YAAP,SAAmBX,GAElB,OAAO1B,EAAAA,GAAG,IAAI3C,KACb0E,EAAAA,MAvCmB,IAuCLC,KAAKC,YZswBlBT,EYlwBIc,QAAP,SAAeZ,EAAaG,GAE3B,OAAO7B,EAAAA,GAAG6B,GAAIxE,KACb0E,EAAAA,MA9CmB,IA8CLC,KAAKC,YZmwBlBT,EY/vBIe,OAAP,SAAcb,EAAa/D,GAE1B,OAAOqC,EAAAA,GAAGrC,GAAMN,KACf0E,EAAAA,MArDmB,IAqDLC,KAAKC,YZgwBXT,EY5yBUA,GZ+yBfgB,GW3pBmBnD,EE3JwC,CAChEoD,SAAU,IF0J0BlI,EEzJlCoE,EAAU8B,QF2JL,CACNL,QAFKkB,EAAQ,IAAIlC,EAAMC,EAAO9E,EE1JV,aF4JN6F,OACdE,MAAOgB,EAAMhB,MAAMoC,KAAKpB,GACxBf,QAASe,EAAMf,QAAQmC,KAAKpB,GAC5BX,QAASW,EAAMX,QAAQ+B,KAAKpB,GAC5BpB,OAAQoB,EAAMpB,OAAOwC,KAAKpB,GAC1BtE,KAAMsE,EAAMtE,KAAK0F,KAAKpB,GACtBvB,UAAWuB,EAAMvB,UAAU2C,KAAKpB,GAChCT,QAASS,EAAMT,QAAQ6B,KAAKpB,GAC5BJ,WAAYI,EAAMJ,WAAWwB,KAAKpB,KEtK5BlB,EAAAA,EAAAA,OAAQE,EAAAA,EAAAA,MAAOC,EAAAA,EAAAA,QAASM,EAAAA,EAAAA,QAASK,EAAAA,EAAAA,WAI5ByB,EAAb,WAAA,SAAAA,KAAA,OAAAA,EAMQC,eAAP,WACC,OAAOtC,IAAQjD,KACd8E,EAAAA,WAAU,WAAA,OAAMU,EAAAA,MAAMtC,GAAQ,SAAClB,GAAD,OAAgBA,EAAMoD,YAAsCjB,EAAWC,MAAM,QAAQpE,KAClHwD,GAAQ,SAAC4B,EAAuBpD,GAAxB,OAAuCA,EAAMoD,SAAWA,KAChEvB,EAAWlH,QAAQ8I,WAVvBH,EAgBQlB,MAAP,WACC,OAAOnB,IAAQjD,KACd8E,EAAAA,WAAU,WAAA,OAAMX,EAAWC,MAAM,OAAOpE,KACvCwD,GAAQ,SAAC4B,EAAuBpD,GAAxB,OAAuCA,EAAMoD,SAAWA,KAChEvB,EAAWlH,QAAQ8I,WApBvBH,EAwBQT,SAAP,WACC,OAAO5B,IAAQjD,KACd8E,EAAAA,WAAU,WAAA,OAAMX,EAAWU,SAAS,OAAO7E,KAC1CwD,GAAQ,SAAClD,EAAiB0B,GACzBA,EAAMoD,SAASM,KAAKpF,MAErBuD,EAAWlH,QAAQ8I,WA9BvBH,EAmCQN,YAAP,WACC,OAAO/B,IAAQjD,KACd8E,EAAAA,WAAU,WAAA,OAAMX,EAAWa,YAAY,OAAOhF,KAC7CwD,GAAQ,SAACvE,EAAoB+C,GAArB,OAAoCA,EAAMoD,SAAWnG,KAC7D4E,EAAWlH,QAAQ8I,WAvCvBH,EA4CQK,YAAP,SAAmBnB,GAClB,OAAOvB,IAAQjD,KACd8E,EAAAA,WAAU,WAAA,OAAMX,EAAWc,QAAQ,MAAOT,GAAIxE,KAC7CwD,GAAQ,SAACgB,EAAYxC,GACpB,IAAM4D,EAAQ5D,EAAMoD,SAASS,QAAO,SAACC,EAAWC,EAAcnM,GAC7D,OAAOmM,EAAEvB,KAAOA,EAAK5K,EAAIkM,KACtB,IACW,IAAXF,GACH5D,EAAMoD,SAASY,OAAOJ,EAAO,MAG/B/B,EAAWlH,QAAQ8I,WAvDvBH,EA4DQW,iBAAP,SAAwB3F,GACvB,OAAO2C,IAAQjD,KACd8E,EAAAA,WAAU,WAAA,OAAMX,EAAWe,OAAO,MAAO5E,GAAMN,KAC9CwD,GAAQ,SAAClD,EAAiB0B,GACzB,IAAMkE,EAAYlE,EAAMoD,SAASzG,MAAK,SAACrB,GAAD,OAAkBA,EAAEkH,KAAOlE,EAAKkE,MAClE0B,IACHA,EAAUC,WAAaD,EAAUC,cAGnCtC,EAAWlH,QAAQ8I,WArEvBpL,EAAAiL,EAAA,KAAA,CAAA,CAAAlL,IAAA,SAAAoE,IAAA,WAGE,OAAOuE,MAHTuC,EAAA,GCHIS,EAAY,EAEKK,EAAAA,SAAAA,Gd44BjB,SAASA,IACP,OAAOlL,EAAWC,MAAMC,KAAMC,YAAcD,KAH9CV,EAAe0L,EAAclL,GAM7B,IAAI4E,EAASsG,EAAa3L,UA+C1B,OA7CAqF,Ech5BHC,OAAA,Wdi5BK,IAAI9E,EAAQG,Kch5BCiL,EAAAA,WAAWjL,MAApBkL,KACHC,UAAUC,IAAI,QACnBlB,EAAYvC,OAAO/C,KAAKC,EAAAA,UAAU7E,KAAK8E,eAAeC,WAAU,SAAC6B,GAChE/G,EAAK+G,MAAQA,EACb/G,EAAKO,cACLmB,QAAQ8I,IAAI,OAAQM,QAErBT,EAAYC,iBACVvF,KAAKyG,EAAAA,SACLtG,UAAUxD,QAAQ8I,Mdu5BlB3F,Ecp5BHvE,SAAA,SAAS+E,GACRgF,EAAYW,iBAAiB3F,GAAMH,UAAUxD,QAAQ8I,Mdu5BnD3F,Ecp5BH4G,UAAA,WACCpB,EAAYT,WAAW1E,UAAUxD,QAAQ8I,Mdu5BvC3F,Ecp5BH6G,aAAA,WACCrB,EAAYN,cAAc7E,UAAUxD,QAAQ8I,Mdu5B1C3F,Ecp5BHtC,WAAA,SAAWgH,GACVc,EAAYK,YAAYnB,GAAIrE,UAAUxD,QAAQ8I,Mdu5B5C3F,Ecp5BH8G,YAAA,WACC/I,EAAqBE,Sdu5BnB+B,Ecp5BH+G,kBAAA,WACCtG,EAAoBxC,Sdu5BlB+B,Ecp5BHgH,oBAAA,WACChG,EAAsB/C,Sdu5BbqI,Ec/7BUA,CAAqB3K,EAAAA,WA2ClC2K,EAAAA,KAAqB,CAC3B1K,SAAU,mBdy5BV,Iez8BmBqL,EAAAA,SAAAA,Gf48BjB,SAASA,IACP,OAAO7L,EAAWC,MAAMC,KAAMC,YAAcD,KAe9C,OAlBAV,EAAeqM,EAAkB7L,GAMpB6L,EAAiBtM,Ue98BjCsF,OAAA,Wfi9BK,IAAI9E,EAAQG,Keh9BhBkK,EAAYvC,OAAO/C,KAClBC,EAAAA,UAAU7E,KAAK8E,eACdC,WAAU,SAAC6B,GACZ/G,EAAKmK,SAAWpD,EAAMoD,SACtBnK,EAAKO,kBfq9BGuL,Ee59BUA,CAAyBtL,EAAAA,WAWtCsL,EAAAA,KAAqB,CAC3BrL,SAAU,oBACVE,SAAQ,sDfs9BR,IgBl+BmBoL,EAAAA,SAAAA,GhBq+BjB,SAASA,IACP,OAAOtF,EAAQvG,MAAMC,KAAMC,YAAcD,KAG3C,OANAV,EAAesM,EAAWtF,GAMnBsF,EgBz+BUA,CAAkBrF,EAAAA,QAE/BqF,EAAAA,KAAoB,CAC1BC,QAAS,CACRC,EAAAA,WACAzF,GAEDG,aAAc,CACbmF,GAEDI,UAAWf,GCZbgB,EAAAA,QAAQD,UAAUH,GjBGlB,CAk/BE3N,OAAQE,KAAKD,UAAWC,KAAMC","file":"docs\\js\\main.min.js","sourcesContent":[null,"import { Component, IFactoryMeta } from 'rxcomp';\r\n\r\nexport default class JsonComponent extends Component {\r\n\r\n\tactive: boolean = false;\r\n\r\n\tonToggle() {\r\n\t\tthis.active = !this.active;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tstatic meta: IFactoryMeta = {\r\n\t\tselector: 'json-component',\r\n\t\tinputs: ['item'],\r\n\t\ttemplate: `\r\n\t\t<div class=\"rxc-block\">\r\n\t\t\t<div class=\"rxc-head\">\r\n\t\t\t\t<span class=\"rxc-head__title\" (click)=\"onToggle()\">\r\n\t\t\t\t\t<span *if=\"!active\">+ json </span>\r\n\t\t\t\t\t<span *if=\"active\">- json </span>\r\n\t\t\t\t\t<span [innerHTML]=\"item\"></span>\r\n\t\t\t\t</span>\r\n\t\t\t</div>\r\n\t\t\t<ul class=\"rxc-list\" *if=\"active\">\r\n\t\t\t\t<li class=\"rxc-list__item\">\r\n\t\t\t\t\t<span class=\"rxc-list__value\" [innerHTML]=\"item | json\"></span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>`,\r\n\t};\r\n}\r\n","\r\nexport interface IStorageItem {\r\n\tname: string;\r\n\tvalue: any;\r\n}\r\n\r\nexport default class StorageService {\r\n\r\n\tstatic supported: boolean = false;\r\n\r\n\tstatic encode(value: any): string | null {\r\n\t\tlet encodedJson: string | null = null;\r\n\t\ttry {\r\n\t\t\tconst cache: Map<any, boolean> = new Map();\r\n\t\t\tconst json: string = JSON.stringify(value, function (key, value) {\r\n\t\t\t\tif (typeof value === 'object' && value != null) {\r\n\t\t\t\t\tif (cache.has(value)) {\r\n\t\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcache.set(value, true);\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t});\r\n\t\t\tencodedJson = btoa(encodeURIComponent(json));\r\n\t\t} catch (error) {\r\n\t\t\tconsole.warn('StorageService.encode.error', value, error);\r\n\t\t}\r\n\t\treturn encodedJson;\r\n\t}\r\n\r\n\tstatic decode(encodedJson: string | null): any {\r\n\t\tlet value: any;\r\n\t\tif (encodedJson) {\r\n\t\t\ttry {\r\n\t\t\t\tvalue = JSON.parse(decodeURIComponent(atob(encodedJson)));\r\n\t\t\t} catch (error) {\r\n\t\t\t\t// console.warn('StorageService.decode.error', encodedJson);\r\n\t\t\t\tvalue = encodedJson;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic isSupported(type: 'localStorage' | 'sessionStorage'): boolean {\r\n\t\tlet flag: boolean = false;\r\n\t\tlet storage;\r\n\t\ttry {\r\n\t\t\tstorage = window[type];\r\n\t\t\tconst x = '__storage_test__';\r\n\t\t\tstorage.setItem(x, x);\r\n\t\t\tstorage.removeItem(x);\r\n\t\t\tflag = true;\r\n\t\t} catch (error) {\r\n\t\t\tflag = error instanceof DOMException && (\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.code === 22 ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.code === 1014 ||\r\n\t\t\t\t// test name field too, because code might not be present\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\terror.name === 'QuotaExceededError' ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\terror.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n\t\t\t\t// acknowledge QuotaExceededError only if there's something already stored\r\n\t\t\t\tBoolean(storage && storage.length !== 0);\r\n\t\t}\r\n\t\treturn flag;\r\n\t}\r\n}\r\n","import { ReplaySubject } from \"rxjs\";\r\nimport StorageService, { IStorageItem } from \"./storage.service\";\r\n\r\nexport default class CookieStorageService extends StorageService {\r\n\r\n\tstatic items$: ReplaySubject<IStorageItem[]> = new ReplaySubject(1);\r\n\r\n\tstatic clear(): void {\r\n\t\tthis.toRawArray().forEach(x => {\r\n\t\t\tthis.setter(x.name, '', -1);\r\n\t\t\t// document.cookie = `${x.name}= ; expires = Thu, 01 Jan 1970 00:00:00 GMT`;\r\n\t\t});\r\n\t}\r\n\r\n\tstatic delete(name: string): void {\r\n\t\tthis.setter(name, '', -1);\r\n\t}\r\n\r\n\tstatic exist(name: string): boolean {\r\n\t\treturn document.cookie.indexOf(';' + name + '=') !== -1 || document.cookie.indexOf(name + '=') === 0;\r\n\t}\r\n\r\n\tstatic get(name: string): any {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\r\n\tstatic set(name: string, value: any, days?: number): void {\r\n\t\tthis.setter(name, this.encode(value), days);\r\n\t}\r\n\r\n\tstatic getRaw(name: string): string | null {\r\n\t\tlet value = null;\r\n\t\tconst cookies = this.toRawArray();\r\n\t\tconst cookie = cookies.find(x => x.name === name);\r\n\t\tif (cookie) {\r\n\t\t\tvalue = cookie.value;\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic setRaw(name: string, value: string, days?: number): void {\r\n\t\tthis.setter(name, value, days);\r\n\t}\r\n\r\n\tstatic toArray(): IStorageItem[] {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\r\n\tstatic toRawArray(): IStorageItem[] {\r\n\t\treturn document.cookie.split(';').map(x => {\r\n\t\t\tconst items = x.split('=');\r\n\t\t\treturn { name: items[0].trim(), value: items[1] ? items[1].trim() : null }\r\n\t\t}).filter(x => x.name !== '');\r\n\t}\r\n\r\n\tstatic setter(name: string, value: any, days?: number): void {\r\n\t\tlet expires: string;\r\n\t\tif (days) {\r\n\t\t\tconst date = new Date();\r\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\r\n\t\t\texpires = '; expires=' + date.toUTCString();\r\n\t\t} else {\r\n\t\t\texpires = '';\r\n\t\t}\r\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\r\n\t\tthis.items$.next(this.toArray());\r\n\t}\r\n\r\n\tstatic isSupported(): boolean {\r\n\t\tconst isBrowser: boolean = typeof window !== 'undefined' && typeof window.document !== 'undefined';\r\n\t\treturn isBrowser;\r\n\t}\r\n}\r\n","import { Component, IFactoryMeta } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport CookieStorageService from './cookie-storage.service';\r\nimport { IStorageItem } from './storage.service';\r\n\r\nexport default class CookieStorageComponent extends Component {\r\n\r\n\tactive: boolean = false;\r\n\titems: IStorageItem[] = [];\r\n\r\n\tonInit() {\r\n\t\tthis.items = CookieStorageService.toArray();\r\n\t\tCookieStorageService.items$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonToggle() {\r\n\t\tthis.active = !this.active;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClear() {\r\n\t\tCookieStorageService.clear();\r\n\t}\r\n\r\n\tonRemove(item: IStorageItem) {\r\n\t\tCookieStorageService.delete(item.name);\r\n\t}\r\n\r\n\tstatic meta: IFactoryMeta = {\r\n\t\tselector: 'cookie-storage-component',\r\n\t\ttemplate: `\r\n\t\t<div class=\"rxc-block\">\r\n\t\t\t<div class=\"rxc-head\">\r\n\t\t\t\t<span class=\"rxc-head__title\" (click)=\"onToggle()\">\r\n\t\t\t\t\t<span *if=\"!active\">+ cookie</span>\r\n\t\t\t\t\t<span *if=\"active\">- cookie</span>\r\n\t\t\t\t\t<span [innerHTML]=\"' {' + items.length + ')'\"></span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"rxc-head__remove\" (click)=\"onClear()\">x</span>\r\n\t\t\t</div>\r\n\t\t\t<ul class=\"rxc-list\" *if=\"active\">\r\n\t\t\t\t<li class=\"rxc-list__item\" *for=\"let item of items\">\r\n\t\t\t\t\t<span class=\"rxc-list__name\" [innerHTML]=\"item.name\"></span>\r\n\t\t\t\t\t<span class=\"rxc-list__value\" [innerHTML]=\"item.value | json\"></span>\r\n\t\t\t\t\t<span class=\"rxc-list__remove\" (click)=\"onRemove(item)\">x</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>`,\r\n\t};\r\n}\r\n","import { ReplaySubject } from \"rxjs\";\r\nimport StorageService, { IStorageItem } from \"./storage.service\";\r\n\r\nexport default class LocalStorageService extends StorageService {\r\n\r\n\tstatic items$: ReplaySubject<IStorageItem[]> = new ReplaySubject(1);\r\n\r\n\tstatic clear(): void {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\r\n\tstatic delete(name: string): void {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tlocalStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name: string): boolean {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn localStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name: string): any {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\r\n\tstatic set(name: string, value: any): void {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\r\n\tstatic getRaw(name: string): string | null {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = localStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic setRaw(name: string, value: string | null): void {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tlocalStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\r\n\tstatic toArray(): IStorageItem[] {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\r\n\tstatic toRawArray(): IStorageItem[] {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(localStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSupported(): boolean {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('localStorage');\r\n\t\t/*\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'localStorage' in window && localStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\tlocalStorage.setItem('test', '1');\r\n\t\t\t\tlocalStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t\t*/\r\n\t}\r\n}\r\n","import { Component, IFactoryMeta } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport LocalStorageService from './local-storage.service';\r\nimport { IStorageItem } from './storage.service';\r\n\r\nexport default class LocalStorageComponent extends Component {\r\n\r\n\tactive: boolean = false;\r\n\titems: IStorageItem[] = [];\r\n\r\n\tonInit() {\r\n\t\tthis.items = LocalStorageService.toArray();\r\n\t\tLocalStorageService.items$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonToggle() {\r\n\t\tthis.active = !this.active;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClear() {\r\n\t\tLocalStorageService.clear();\r\n\t}\r\n\r\n\tonRemove(item: IStorageItem) {\r\n\t\tLocalStorageService.delete(item.name);\r\n\t}\r\n\r\n\tstatic meta: IFactoryMeta = {\r\n\t\tselector: 'local-storage-component',\r\n\t\ttemplate: `\r\n\t\t<div class=\"rxc-block\">\r\n\t\t\t<div class=\"rxc-head\">\r\n\t\t\t\t<span class=\"rxc-head__title\" (click)=\"onToggle()\">\r\n\t\t\t\t\t<span *if=\"!active\">+ localStorage</span>\r\n\t\t\t\t\t<span *if=\"active\">- localStorage</span>\r\n\t\t\t\t\t<span [innerHTML]=\"' {' + items.length + ')'\"></span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"rxc-head__remove\" (click)=\"onClear()\">x</span>\r\n\t\t\t</div>\r\n\t\t\t<ul class=\"rxc-list\" *if=\"active\">\r\n\t\t\t\t<li class=\"rxc-list__item\" *for=\"let item of items\">\r\n\t\t\t\t\t<span class=\"rxc-list__name\" [innerHTML]=\"item.name\"></span>\r\n\t\t\t\t\t<span class=\"rxc-list__value\" [innerHTML]=\"item.value | json\"></span>\r\n\t\t\t\t\t<span class=\"rxc-list__remove\" (click)=\"onRemove(item)\">x</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>`,\r\n\t};\r\n}\r\n","import { ReplaySubject } from \"rxjs\";\r\nimport StorageService, { IStorageItem } from \"./storage.service\";\r\n\r\nexport default class SessionStorageService extends StorageService {\r\n\r\n\tstatic items$: ReplaySubject<IStorageItem[]> = new ReplaySubject(1);\r\n\r\n\tstatic clear(): void {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tsessionStorage.clear();\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\r\n\tstatic delete(name: string): void {\r\n\t\tif (this.isSupported()) {\r\n\t\t\tsessionStorage.removeItem(name);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\r\n\tstatic exist(name: string): boolean {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn sessionStorage.getItem(name) !== undefined;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic get(name: string): any {\r\n\t\treturn this.decode(this.getRaw(name));\r\n\t}\r\n\r\n\tstatic set(name: string, value: any): void {\r\n\t\tthis.setRaw(name, this.encode(value));\r\n\t}\r\n\r\n\tstatic getRaw(name: string): string | null {\r\n\t\tlet value = null;\r\n\t\tif (this.isSupported()) {\r\n\t\t\tvalue = sessionStorage.getItem(name);\r\n\t\t}\r\n\t\treturn value;\r\n\t}\r\n\r\n\tstatic setRaw(name: string, value: string | null): void {\r\n\t\tif (value && this.isSupported()) {\r\n\t\t\tsessionStorage.setItem(name, value);\r\n\t\t\tthis.items$.next(this.toArray());\r\n\t\t}\r\n\t}\r\n\r\n\tstatic toArray(): IStorageItem[] {\r\n\t\treturn this.toRawArray().map(x => {\r\n\t\t\tx.value = this.decode(x.value);\r\n\t\t\treturn x;\r\n\t\t});\r\n\t}\r\n\r\n\tstatic toRawArray(): IStorageItem[] {\r\n\t\tif (this.isSupported()) {\r\n\t\t\treturn Object.keys(sessionStorage).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: key,\r\n\t\t\t\t\tvalue: this.getRaw(key),\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t}\r\n\r\n\tstatic isSupported(): boolean {\r\n\t\tif (this.supported) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn StorageService.isSupported('sessionStorage');\r\n\t\t/*\r\n\t\tlet supported = false;\r\n\t\ttry {\r\n\t\t\tsupported = 'sessionStorage' in window && sessionStorage !== null;\r\n\t\t\tif (supported) {\r\n\t\t\t\tsessionStorage.setItem('test', '1');\r\n\t\t\t\tsessionStorage.removeItem('test');\r\n\t\t\t} else {\r\n\t\t\t\tsupported = false;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tsupported = false;\r\n\t\t}\r\n\t\tthis.supported = supported;\r\n\t\treturn supported;\r\n\t\t*/\r\n\t}\r\n}\r\n","import { Component, IFactoryMeta } from 'rxcomp';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport SessionStorageService from './session-storage.service';\r\nimport { IStorageItem } from './storage.service';\r\n\r\nexport default class SessionStorageComponent extends Component {\r\n\r\n\tactive: boolean = false;\r\n\titems: IStorageItem[] = [];\r\n\r\n\tonInit() {\r\n\t\tthis.items = SessionStorageService.toArray();\r\n\t\tSessionStorageService.items$.pipe(\r\n\t\t\ttakeUntil(this.unsubscribe$)\r\n\t\t).subscribe(items => {\r\n\t\t\tthis.items = items;\r\n\t\t\tthis.pushChanges();\r\n\t\t});\r\n\t}\r\n\r\n\tonToggle() {\r\n\t\tthis.active = !this.active;\r\n\t\tthis.pushChanges();\r\n\t}\r\n\r\n\tonClear() {\r\n\t\tSessionStorageService.clear();\r\n\t}\r\n\r\n\tonRemove(item: IStorageItem) {\r\n\t\tSessionStorageService.delete(item.name);\r\n\t}\r\n\r\n\tstatic meta: IFactoryMeta = {\r\n\t\tselector: 'session-storage-component',\r\n\t\ttemplate: `\r\n\t\t<div class=\"rxc-block\">\r\n\t\t\t<div class=\"rxc-head\">\r\n\t\t\t\t<span class=\"rxc-head__title\" (click)=\"onToggle()\">\r\n\t\t\t\t\t<span *if=\"!active\">+ sessionStorage</span>\r\n\t\t\t\t\t<span *if=\"active\">- sessionStorage</span>\r\n\t\t\t\t\t<span [innerHTML]=\"' {' + items.length + ')'\"></span>\r\n\t\t\t\t</span>\r\n\t\t\t\t<span class=\"rxc-head__remove\" (click)=\"onClear()\">x</span>\r\n\t\t\t</div>\r\n\t\t\t<ul class=\"rxc-list\" *if=\"active\">\r\n\t\t\t\t<li class=\"rxc-list__item\" *for=\"let item of items\">\r\n\t\t\t\t\t<span class=\"rxc-list__name\" [innerHTML]=\"item.name\"></span>\r\n\t\t\t\t\t<span class=\"rxc-list__value\" [innerHTML]=\"item.value | json\"></span>\r\n\t\t\t\t\t<span class=\"rxc-list__remove\" (click)=\"onRemove(item)\">x</span>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>`,\r\n\t};\r\n}\r\n","import { Pipe } from 'rxcomp';\r\n\r\nexport default class JsonPipe extends Pipe {\r\n\r\n\tstatic transform(value: any): string {\r\n\t\tconst cache: Map<any, boolean> = new Map();\r\n\t\tconst json: string = JSON.stringify(value, function (key, value) {\r\n\t\t\tif (typeof value === 'object' && value != null) {\r\n\t\t\t\tif (cache.has(value)) {\r\n\t\t\t\t\t// Circular reference found, discard key\r\n\t\t\t\t\treturn '#ref';\r\n\t\t\t\t}\r\n\t\t\t\tcache.set(value, true);\r\n\t\t\t}\r\n\t\t\treturn value;\r\n\t\t}, 2);\r\n\t\treturn json;\r\n\t}\r\n\r\n}\r\n\r\nJsonPipe.meta = {\r\n\tname: 'json',\r\n};\r\n","import { Factory, IModuleMeta, Module, Pipe } from 'rxcomp';\r\nimport JsonComponent from './json/json.component';\r\nimport JsonPipe from './json/json.pipe';\r\nimport CookieStorageComponent from './storage/cookie-storage.component';\r\nimport LocalStorageComponent from './storage/local-storage.component';\r\nimport SessionStorageComponent from './storage/session-storage.component';\r\n\r\nconst factories: typeof Factory[] = [\r\n\tJsonComponent,\r\n\tCookieStorageComponent,\r\n\tLocalStorageComponent,\r\n\tSessionStorageComponent,\r\n];\r\n\r\nconst pipes: typeof Pipe[] = [\r\n\tJsonPipe,\r\n];\r\n\r\n/**\r\n * StoreModule Class.\r\n * @example\r\n * export default class AppModule extends Module {}\r\n *\r\n * AppModule.meta = {\r\n *  imports: [\r\n *   CoreModule,\r\n *   StoreModule\r\n *  ],\r\n *  declarations: [\r\n *   ErrorsComponent\r\n *  ],\r\n *  bootstrap: AppComponent,\r\n * };\r\n * @extends Module\r\n */\r\nexport default class StoreModule extends Module {\r\n\r\n\tstatic meta: IModuleMeta = {\r\n\t\tdeclarations: [\r\n\t\t\t...factories,\r\n\t\t\t...pipes,\r\n\t\t],\r\n\t\texports: [\r\n\t\t\t...factories,\r\n\t\t\t...pipes,\r\n\t\t]\r\n\t};\r\n\r\n}\r\n","import { produce } from 'immer';\nimport { BehaviorSubject, defer, Observable, of } from 'rxjs';\nimport { catchError, distinctUntilChanged, filter, map } from 'rxjs/operators';\nimport CookieStorageService from '../storage/cookie-storage.service';\nimport LocalStorageService from '../storage/local-storage.service';\nimport SessionStorageService from '../storage/session-storage.service';\n\nexport enum StoreType {\n\tMemory = 1,\n\tSession = 2,\n\tLocal = 3,\n\tCookie = 4,\n};\n\nexport interface IStore {\n\tbusy$: () => Observable<null>,\n\treducer: <T, R>(reducer: (data: T, draft: any) => R) => (source: Observable<T>) => Observable<any>,\n\tnext: (callback: (draft: any) => any) => any,\n\tnextError: (error: any) => Observable<any>,\n\tselect: (callback: (draft: any) => any) => any,\n\tselect$: (callback: (draft: any) => any) => any,\n\tcached$: (callback: (draft: any) => any) => any,\n\tcatchState: (error?: any) => any,\n\tstate$: Observable<any>,\n}\n\nexport class Store {\n\n\ttype: StoreType;\n\tkey: string;\n\tstate$: Observable<any>;\n\n\tget state() {\n\t\treturn this.select((draft: any) => draft);\n\t}\n\n\tset state(callback: (draft: any) => any) {\n\t\tthis.next(callback);\n\t}\n\n\tconstructor(state: any = {}, type = StoreType.Memory, key: string = 'store') {\n\t\tthis.type = type;\n\t\tthis.key = `rxcomp_${key}`;\n\t\tstate.busy = false;\n\t\tstate.error = null;\n\t\tconst state_ = new BehaviorSubject(state);\n\t\tthis.next = makeNext(state_);\n\t\tthis.nextError = makeNextError(state_);\n\t\tthis.select = makeSelect(state_);\n\t\tthis.state$ = state_.asObservable();\n\t}\n\n\tbusy$(): Observable<null> {\n\t\treturn of(null).pipe(\n\t\t\tfilter(() => {\n\t\t\t\tlet busy = this.select(state => state.busy);\n\t\t\t\tif (!busy) {\n\t\t\t\t\tthis.state = (draft: any) => {\n\t\t\t\t\t\tdraft.busy = true;\n\t\t\t\t\t\tdraft.error = null;\n\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tcached$(callback: (value: any) => any): Observable<any> {\n\t\treturn of(null).pipe(\n\t\t\tmap(() => {\n\t\t\t\tlet value = null;\n\t\t\t\tif (this.type === StoreType.Local) {\n\t\t\t\t\tvalue = LocalStorageService.get(this.key);\n\t\t\t\t} else if (this.type === StoreType.Session) {\n\t\t\t\t\tvalue = SessionStorageService.get(this.key);\n\t\t\t\t} else if (this.type === StoreType.Cookie) {\n\t\t\t\t\tvalue = CookieStorageService.get(this.key);\n\t\t\t\t}\n\t\t\t\tif (value && typeof callback === 'function') {\n\t\t\t\t\tvalue = callback(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}),\n\t\t\tfilter((x) => {\n\t\t\t\t// console.log('value', x);\n\t\t\t\treturn x != null;\n\t\t\t})\n\t\t);\n\t}\n\n\tselect$(callback: (draft: any) => any): Observable<any> {\n\t\treturn this.state$.pipe(\n\t\t\tmap(callback),\n\t\t\tdistinctUntilChanged()\n\t\t);\n\t}\n\n\tselect(callback: (draft: any) => any): any { }\n\n\tnext(callback: (draft: any) => any): void { }\n\n\tnextError(error: any): Observable<any> {\n\t\treturn of();\n\t}\n\n\treducer<T, R>(reducer: (data: T, draft: any) => R) {\n\t\treturn (source: Observable<T>) => defer(() => {\n\t\t\t// initialize global values\n\t\t\treturn source.pipe(\n\t\t\t\tmap((data: T) => {\n\t\t\t\t\tif (typeof reducer === 'function') {\n\t\t\t\t\t\tthis.state = (draft: any) => {\n\t\t\t\t\t\t\tdraft.error = null;\n\t\t\t\t\t\t\treducer(data, draft);\n\t\t\t\t\t\t\tdraft.busy = false;\n\t\t\t\t\t\t\tif (this.type === StoreType.Local) {\n\t\t\t\t\t\t\t\tLocalStorageService.set(this.key, draft);\n\t\t\t\t\t\t\t\t// console.log('reducer.LocalStorageService.set', this.key, draft);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.type === StoreType.Session) {\n\t\t\t\t\t\t\t\tSessionStorageService.set(this.key, draft);\n\t\t\t\t\t\t\t\t// console.log('reducer.SessionStorageService.set', this.key, draft);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.type === StoreType.Cookie) {\n\t\t\t\t\t\t\t\tCookieStorageService.set(this.key, draft, 365);\n\t\t\t\t\t\t\t\t// console.log('reducer.CookieStorageService.set', this.key, draft);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn data;\n\t\t\t\t}),\n\t\t\t);\n\t\t});\n\t};\n\n\tcatchState(errorReducer?: (error: any) => any): (source: Observable<any>) => Observable<any> {\n\t\treturn (source: Observable<any>) =>\n\t\t\tdefer(() => {\n\t\t\t\t// initialize global values\n\t\t\t\treturn source.pipe(\n\t\t\t\t\tcatchError(error => {\n\t\t\t\t\t\tthis.state = (draft: any) => {\n\t\t\t\t\t\t\tdraft.error = error;\n\t\t\t\t\t\t\tdraft.busy = false;\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (typeof errorReducer === 'function') {\n\t\t\t\t\t\t\terror = errorReducer(error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\terror = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (error ? of(error) : of());\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t};\n\n}\n\nexport function useStore(state: any, type?: StoreType, key?: string): IStore {\n\tconst store = new Store(state, type, key);\n\treturn {\n\t\tstate$: store.state$,\n\t\tbusy$: store.busy$.bind(store),\n\t\tcached$: store.cached$.bind(store),\n\t\tselect$: store.select$.bind(store),\n\t\tselect: store.select.bind(store),\n\t\tnext: store.next.bind(store),\n\t\tnextError: store.nextError.bind(store),\n\t\treducer: store.reducer.bind(store),\n\t\tcatchState: store.catchState.bind(store),\n\t};\n}\n\n/*\nexport function makeNext<T, R>(callback: (data: T) => R) : OperatorFunction<T, R>\nexport function makeNext<T extends { data: any }>() : OperatorFunction<T, T['data']>\nexport function makeNext<T>() : OperatorFunction<T, T>\nexport function makeNext<T extends { data? : undefined } | { data: R }, R>(callback?: (data: T) => R) {\n  return (source: Observable<T>) => source.pipe(\n    map(value => typeof callback === 'function' ? callback(value) : (value.data ? value.data : value)),\n  );\n}\n*/\n\nfunction makeNext(state: BehaviorSubject<any>): (callback: (draft: any) => any) => void {\n\treturn (callback: (draft: any) => any) => {\n\t\tstate.next(produce(state.getValue(), (draft: any) => {\n\t\t\tif (typeof callback === 'function') {\n\t\t\t\tcallback(draft);\n\t\t\t}\n\t\t\treturn draft;\n\t\t}));\n\t};\n}\n\nfunction makeNextError(state: BehaviorSubject<any>): (error: any) => Observable<any> {\n\treturn (error?: any) => {\n\t\tstate.next(produce(state.getValue(), (draft: any) => {\n\t\t\tdraft.error = error;\n\t\t\tdraft.busy = false;\n\t\t\treturn draft;\n\t\t}));\n\t\treturn of(error);\n\t};\n}\n\nfunction makeSelect(state: BehaviorSubject<any>): (callback: (draft: any) => any) => any {\n\treturn (callback: (draft: any) => any) => {\n\t\treturn callback(state.getValue());\n\t};\n}\n","import { Observable, of, throwError } from 'rxjs';\r\nimport { delay, switchMap } from 'rxjs/operators';\r\n\r\nconst DELAY: number = 300;\r\nlet PROGRESSIVE_INDEX: number = 0;\r\n\r\nexport interface ITodoItem {\r\n\tid?: number;\r\n\tname?: string;\r\n\tcompleted?: boolean;\r\n}\r\n\r\nexport default class ApiService {\r\n\r\n\tstatic load$(url: string): Observable<ITodoItem[]> {\r\n\t\t// simulate api call\r\n\t\treturn of(new Array(1).fill(0).map((x, i) => {\r\n\t\t\tconst id = new Date().valueOf() + i;\r\n\t\t\treturn { id: id, name: `${PROGRESSIVE_INDEX++} item ${id}` };\r\n\t\t})).pipe(\r\n\t\t\tdelay(DELAY * Math.random())\r\n\t\t);\r\n\t}\r\n\r\n\tstatic addItem$(url: string, item?: ITodoItem): Observable<ITodoItem> {\r\n\t\t// simulate api call\r\n\t\tconst id = new Date().valueOf();\r\n\t\tif (Math.random() < 0.3) {\r\n\t\t\t// simulate api error\r\n\t\t\treturn of(1).pipe(\r\n\t\t\t\tdelay(DELAY * Math.random()),\r\n\t\t\t\tswitchMap(() => throwError(`simulated error ${id}`))\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn of({ id: id, name: `${PROGRESSIVE_INDEX++} item ${id}` }).pipe(\r\n\t\t\tdelay(DELAY * Math.random())\r\n\t\t);\r\n\t}\r\n\r\n\tstatic clearItems$(url: string): Observable<ITodoItem[]> {\r\n\t\t// simulate api call\r\n\t\treturn of([]).pipe(\r\n\t\t\tdelay(DELAY * Math.random())\r\n\t\t);\r\n\t}\r\n\r\n\tstatic remove$(url: string, id: number): Observable<number> {\r\n\t\t// simulate api call\r\n\t\treturn of(id).pipe(\r\n\t\t\tdelay(DELAY * Math.random())\r\n\t\t);\r\n\t}\r\n\r\n\tstatic patch$(url: string, item: ITodoItem): Observable<ITodoItem> {\r\n\t\t// simulate api call\r\n\t\treturn of(item).pipe(\r\n\t\t\tdelay(DELAY * Math.random())\r\n\t\t);\r\n\t}\r\n}\r\n","import { merge, Observable } from 'rxjs';\nimport { switchMap } from 'rxjs/operators';\nimport { StoreType, useStore } from '../../../src/rxcomp-store';\nimport ApiService, { ITodoItem } from '../api/api.service';\n\nconst { state$, busy$, cached$, reducer, catchState } = useStore({\n\ttodolist: [],\n}, StoreType.Session, 'todolist');\n\nexport class TodoService {\n\n\tstatic get state$() {\n\t\treturn state$;\n\t}\n\n\tstatic loadWithCache$(): Observable<ITodoItem[] | unknown> {\n\t\treturn busy$().pipe(\n\t\t\tswitchMap(() => merge(cached$((state: any) => state.todolist) as Observable<ITodoItem[]>, ApiService.load$('url')).pipe(\n\t\t\t\treducer((todolist: ITodoItem[], state: any) => state.todolist = todolist),\n\t\t\t\tcatchState(console.log),\n\t\t\t\t// tap((todolist: ITodoItem[]) => next((state: any) => (state.todolist = todolist))),\n\t\t\t\t// catchError((error: any) => nextError(error))\n\t\t\t)));\n\t}\n\n\tstatic load$(): Observable<ITodoItem[] | unknown> {\n\t\treturn busy$().pipe(\n\t\t\tswitchMap(() => ApiService.load$('url').pipe(\n\t\t\t\treducer((todolist: ITodoItem[], state: any) => state.todolist = todolist),\n\t\t\t\tcatchState(console.log),\n\t\t\t)));\n\t}\n\n\tstatic addItem$(): Observable<ITodoItem | unknown> {\n\t\treturn busy$().pipe(\n\t\t\tswitchMap(() => ApiService.addItem$('url').pipe(\n\t\t\t\treducer((item: ITodoItem, state: any) => {\n\t\t\t\t\tstate.todolist.push(item)\n\t\t\t\t}),\n\t\t\t\tcatchState(console.log),\n\t\t\t))\n\t\t);\n\t}\n\n\tstatic clearItems$(): Observable<ITodoItem[] | unknown> {\n\t\treturn busy$().pipe(\n\t\t\tswitchMap(() => ApiService.clearItems$('url').pipe(\n\t\t\t\treducer((items: ITodoItem[], state: any) => state.todolist = items),\n\t\t\t\tcatchState(console.log),\n\t\t\t))\n\t\t);\n\t}\n\n\tstatic removeItem$(id: number): Observable<number | unknown> {\n\t\treturn busy$().pipe(\n\t\t\tswitchMap(() => ApiService.remove$('url', id).pipe(\n\t\t\t\treducer((id: number, state: any) => {\n\t\t\t\t\tconst index = state.todolist.reduce((p: number, c: ITodoItem, i: number) => {\n\t\t\t\t\t\treturn c.id === id ? i : p;\n\t\t\t\t\t}, -1);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tstate.todolist.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tcatchState(console.log),\n\t\t\t))\n\t\t);\n\t}\n\n\tstatic toggleCompleted$(item: ITodoItem): Observable<ITodoItem | unknown> {\n\t\treturn busy$().pipe(\n\t\t\tswitchMap(() => ApiService.patch$('url', item).pipe(\n\t\t\t\treducer((item: ITodoItem, state: any) => {\n\t\t\t\t\tconst stateItem = state.todolist.find((x: ITodoItem) => x.id === item.id);\n\t\t\t\t\tif (stateItem) {\n\t\t\t\t\t\tstateItem.completed = !stateItem.completed;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tcatchState(console.log),\n\t\t\t)));\n\t}\n\n}\n\n","import { Component, getContext, IFactoryMeta } from 'rxcomp';\nimport { first, takeUntil } from 'rxjs/operators';\nimport { CookieStorageService, LocalStorageService, SessionStorageService } from '../../src/rxcomp-store';\nimport { ITodoItem } from './api/api.service';\nimport { TodoService } from './todo/todo.service';\n\nlet c: number = 0;\n\nexport default class AppComponent extends Component {\n\n\tonInit() {\n\t\tconst { node } = getContext(this);\n\t\tnode.classList.add('init');\n\t\tTodoService.state$.pipe(takeUntil(this.unsubscribe$)).subscribe((state) => {\n\t\t\tthis.state = state;\n\t\t\tthis.pushChanges();\n\t\t\tconsole.log('call', c++);\n\t\t});\n\t\tTodoService.loadWithCache$()\n\t\t\t.pipe(first())\n\t\t\t.subscribe(console.log);\n\t}\n\n\tonToggle(item: ITodoItem) {\n\t\tTodoService.toggleCompleted$(item).subscribe(console.log);\n\t}\n\n\tonAddItem() {\n\t\tTodoService.addItem$().subscribe(console.log);\n\t}\n\n\tonClearItems() {\n\t\tTodoService.clearItems$().subscribe(console.log);\n\t}\n\n\tremoveItem(id: number) {\n\t\tTodoService.removeItem$(id).subscribe(console.log);\n\t}\n\n\tclearCookie() {\n\t\tCookieStorageService.clear();\n\t}\n\n\tclearLocalStorage() {\n\t\tLocalStorageService.clear();\n\t}\n\n\tclearSessionStorage() {\n\t\tSessionStorageService.clear();\n\t}\n\n\tstatic meta: IFactoryMeta = {\n\t\tselector: '[app-component]',\n\t};\n\n}\n","import { Component, IFactoryMeta } from 'rxcomp';\nimport { takeUntil } from 'rxjs/operators';\nimport { TodoService } from '../todo/todo.service';\n\nexport default class CounterComponent extends Component {\n\n\tonInit() {\n\t\tTodoService.state$.pipe(\n\t\t\ttakeUntil(this.unsubscribe$)\n\t\t).subscribe((state) => {\n\t\t\tthis.todolist = state.todolist;\n\t\t\tthis.pushChanges();\n\t\t});\n\t}\n\n\tstatic meta: IFactoryMeta = {\n\t\tselector: 'counter-component',\n\t\ttemplate: `#items <span [innerHTML]=\"todolist.length\"></span>`\n\t};\n\n}\n","import { CoreModule, IModuleMeta, Module } from 'rxcomp';\r\nimport { StoreModule } from '../../src/rxcomp-store';\r\nimport AppComponent from './app.component';\r\nimport CounterComponent from './counter/counter.component';\r\n\r\nexport default class AppModule extends Module {\r\n\r\n\tstatic meta: IModuleMeta = {\r\n\t\timports: [\r\n\t\t\tCoreModule,\r\n\t\t\tStoreModule\r\n\t\t],\r\n\t\tdeclarations: [\r\n\t\t\tCounterComponent,\r\n\t\t],\r\n\t\tbootstrap: AppComponent,\r\n\t};\r\n\r\n}\r\n","import { Browser } from 'rxcomp';\r\nimport AppModule from './app.module';\r\n\r\nBrowser.bootstrap(AppModule);\r\n"]}